瀧田さん　栃木出身　DELL保守、立川にて保守導入
木村さん　埼玉出身　オープン保守、サーバーサポート

Server、HWの基礎知識を御稜威家、その後の研修のベースにするとともに、配属後の実務に活かすこと

ServerとClientの違い、インテルアーキテクチャーを知る
Serverを構築するHWの名称と役割を理解
Serverで利用されている用語、技術の概要を理解
トラブルシューティングやバックアップの手法を理解
Server稼働時の環境や考慮すべき項目について理解


1.Serverとは

　Server　サービスを提供するもの
　Client　サービスを利用するもの
　スタンドアローン型
	それぞれが独立したネットワークへ接続しない状態で利用する形式
　	プリンターを使うにもUSBなどの媒体を用いないといけないため効率が悪い
　→Serverを用いることにより、いちいちデータを移動させたりしなくなり、スムーズに作業を行うことができる
　Serverの役割状、常に動作しサービスを提供しなければならないため、障害で停止する状況を作ってはならない

　IA-Server　IntelやAMDなどが製造したIntel互換CPUを搭載したサーバーの総称
　IA(Intel Architecture)　インテル製CPUの基本設計
　以前は汎用コンピュータなどで使用されていた業務APPがPC/AT互換機をベースに安価に利用できるようになった。
　PC/AT　IBMが開発したPC、そのアーキテクチャーを継承した互換機をさすことが多い
　
　Serverには用途や設置環境に合わせ、タワー型、ラック型（ラックマウント型）、ブレード型の３種に大きく分かれる
　タワー型　オフィス内の机上や床上にそのまま設置でき（静音対策）ラック型と比較し、大きいため拡張性が高い
　ラック型　ラックに搭載することを前提に設計される。Server筐体の高さの単位をU(unit)と呼ぶ（1U = 1.75inch)
　ブレード型　物理的に狭いスペースに多く設置可能。構造が大掛かりなため障害の時に大変。
　　　　　　　ラック型と比較して、設置スペース、消費電力、ケーブルの本数削減や一元管理が可能になる。
　
　DELLだとR650をよく見る。6の数字が大きいほど性能が高い！！


2.Serverの用途、役割

　機能　共有ディスクや共有プリンタなど以外にもネットワーク技術の進展と大規模化に伴い役割が細分化
　
　
3.Serverに求められる機能

　Serverを選ぶ基準　壊れてはいけないものに対してはハイスぺのもの（コストをかけても保守を）
　　　　　　　　　　バックアップなどのどうでもいいものには安価なものを適宜
　RAS(RASIS)　Serverの性能に求められる指標
		Reliability　信頼性　故障しにくいこと
　　　　　　　　　非常にクリティカルなものが起きる前に影響を最小限に抑える働きがある
　　　　　　　　　HWへのダメージを避けるため強制的に停止させる機能
　　　　　　　　　CPUやメモリなどの障害を検知した場合、再起動や切り離しをしてから再稼働する機能
　　　　　　　　　障害の統計を出して閾値を超えたHDDからスペアディスクに切り替えるような監視機能
　　　　　　　　　MTBF(Mean Time Between Failure)　システムや機器が平均して何時間に一度故障するかを平均故障間隔で表す
		Availability　可用性　高い稼働率を維持できること
　　　　　　　　　HWの冗長化（HDD、パワーサプライ、ファン、メモリなど）
　　　　　　　　　MTBF/(MTBF+MTTR)　評価する値として稼働率がある  
		Serviceability　保守性　障害が発生した場合に迅速に復旧できること
　　　　　　　　　障害にかかるダウンタイムのうち、部品交換にかかる時間を少なくする要素
　　　　　　　　　メンテや障害復旧のしやすさを表す
　　　　　　　　　サムスクリューの導入、稼働中でも電源を落とさずに交換できるホットプラグ機能
　　　　　　　　　MTTR(Mean Time To Repair)　故障から復旧までの時間を平均修理時間で表す
		Integrity　保全性、完全性　データが矛盾を起こさず一貫性を保っているかどうか
		Security　機密性　機密性が高い、不正アクセスされにくいか
　拡張性　マザボに複数のCPUやメモリ－スロット、拡張バス、HDDスロット
　　　　　HDD数は少数で足りることもあるため、多かろうよかろうではない

　冗長化による耐障害性　基本的な考えとしてSPOF(Single Point of Failure)1点部品の故障によるシステム停止を発生させない工夫　
　電源サブシステム　パワーサプライを複数個実装し1つの障害でも稼働可能
　UPS(Uninterruptible Power Supply:無停電電源装置)　停電などに備える外部バッテリ、安全にServerを落とせる
　RAID (Redundant Array Inexpensive/Independent Disk)　
　ECCメモリー(Error Check and Correct Memory)　メモリ内のデータエラーを検出し訂正を行う
　NICのチーミング　HDDにおけるRAIDのような認識　フォールトトレランス　スタンバイ側に自動切換え
　　　　　　　　　　　　　　　　　　　　　　　　リンクアグリゲーション　同時に帯域幅を増加させる機能を持つ
　クラスタリング　1台のServerに障害が発生してもシステム全体が停止しないように複数のServerを1台とする構成
　バックアップ　データの複製採取

　Serverシャーシ　Serverの物理的な筐体、ESD,EMIから防御、防塵、空気の流路確保などの目的を持っている
　　　　　　　　　ダミーカバーが正しく装着されていないと熱暴走を起こす可能性がある、Serverは稼働音が大きい
　　　　　　　　　ホットスワップ（ホットプラグ）　電源が入った状態での部品の取り外し、取り付けが行える
　　　　　　　　　　　　　　　　　　　　　　　　　Serverの構成、サポート環境により複雑であり、検討確認が必須
　　　　　　　　　HDDはよく壊れ、保守作業で一番多い対応になる、オンラインで買えるものを進めると顧客側の負荷が少ない
　　　　　　　　　ベゼル　盗難防止のためのカバー、とってしまうケースの方が多い　→　ランプが見えなくなるから
　　　　　　　　　

4.基本構成部品
　
　最小構成　マザボ、CPU、メモリ、パワーサプライ
　マザボ　コンピュータのベースとなる基盤　スロットによりPCの各部品と接続　
　　　　　チップセットが対応していなければ高性能な部品は取り付けられない
　　　　　ディバイス説明
　　　　　　CMOSバッテリー　時計機能、BIOSの設定情報の保存　ボタン電池にて対応
　　　　　　ジャンパピン　BIOSのPASS、それの消去　PINを付け替えることによりログインを可能とする
　　　　　　フロントパネル接続コネクタ　電源ボタンと内部的につながるコネクタ
　　　　　　SATAコネクタ　HDDやDVDドライブとの接続　昔のServer規格はIDE規格、現在はATA規格
　　　　　　USBコネクタ　シリアルバス規格　USB1.1、USB2.0、USB3.0（USB3.1/3.2）、USB4など
　　　　　　メモリスロット　マザボが対応するメモリを搭載する必要あり
　　　　　　拡張バススロット　増設用カードスロット　現在はシリアル転送方式のPCI Express規格が主流 
　　　　　　マザボの電源コネクタ　電力供給用コネクタ
　　　　　　CPUソケット　CPUが搭載される　グリスを塗ってヒートシンクを上に置く
　　　　　　FAN用コネクタ　FANを接続するコネクタ
　　　　　　ビデオコネクタ　モニター接続用
　　　　　　NICポート　LAN接続用
　　　　　　COMポート　RS232C規格　モデム、UPS（無停電電源装置）などを接続　外部PCを介してメンテに使用されることあり
　チップセット　マザボの中枢、データのやり取りを制御　もともとは2つのチップで構成されていたためチップセット
　　　　　　　　現在は集積回路が主流となっている
　　　　　　　　ノースブリッジ（現在はCPUに統合）　処理速度が速いデバイス　グラフィックカード　メインメモリ
　　　　　　　　サウスブリッジ（IOコントロールハブ）　処理速度が遅いデバイス　拡張カード　HDD　光学ドライブ（IO機器）
　バス　データや信号を伝達するための回路や伝送路　
　　　　FSB　Core i3/i5/i7以前で使用　QPIに置換
　　　　QPI　マルチプロセッサーシステムにおいてCPU間の高速通信を可能　UPIに置換
　　　　DMI　ノースブリッジ、サウスブリッジ接続用バスとして開発
　　　　　　 CPUに統合されることによりCPUとチップセットの接続に用いられる　

　CPU(Central Processing Unit)　演算と制御を担当
　　　基本性能　フェッチ　命令の取り出し　レジスタに格納
　　　　　　　　デコード　命令の解釈　制御信号を発生　
　　　　　　　　実行　命令の実行　レジスタやメインメモリにあるデータの読み書きが行われる
　　　　　　　　書き戻し　結果の保存　実行結果の保存
　　　デコーダ　命令の内容を解読、内部レジスタ、演算器、周辺装置を制御
　　　演算器　条件判断
　　　内部レジスタ　アドレスを示す　CPU内に値を保管する
　　　動作クロック　タイミングをとるための周期信号[Hz]
　　　キャッシュメモリ　アクセスの高速化を図る　　
　　　コア数　複数コアであればほかのコアに影響されず分担して処理が可能
　　　TDP　CPUや回路が発する最大放熱量[W]　
　　　プロセスルール　回路の配線の幅
　　　スロットタイプ　カートリッジ状
　　　ソケットタイプ　ピン状　今の主流
　　　VRM(Voltage Regulator Module)　電源安定化回路 CPUに適応した電圧に変換するもの　マザボに乗っている

　メモリ　記憶を担当　一時的にデータを置いておく場所
	記憶単位[Byte]
	仕組み状どこのデータにでも高速にアクセスが可能
　　　　CPUが直接アクセスできるのはメインメモリだけ
　　　　ランダムアクセス　どの番地にも高速アクセス
　　　　シーケンシャルアクセス　最初から順番にアクセスすることしかできない
　　　　メモリの種類
	　　RAM(Random Access Memory)
		DRAM(Dynamic RAM)　低コストで大容量　メインメモリに用いられる
			SDRAM(Synchronous DRAM)　ベースクロックに同期をとることでCPU間のデータ転送が高速化
				DDR SDRAM(Double Data Rate SDRAM)　ベースクロックの立上り立下り時の両方で読み書きするため
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　2倍の効率
				DDR2 SDRAM　SDRAMの4倍の効率
				DDR3 SDRAM  SDRAMの8倍の効率、1.5Vと低電圧で作動する
 				DDR4 SDRAM　SDRAMの16倍の効率、1.2Vとより低電圧で作動、現在主流のメモリ
		SRAM(Static RAM)　高コストだが高速アクセス可能　キャッシュに用いられる
	    ROM(Read Oney Memory)
		EEPROM　DRAMと同じような機能
	DIMM　64bitのデータ幅　複数のメモリチップを搭載したメモリモジュール
　　　　　　  4bit出力なら16　8bit出力なら8　16bit出力なら4個のDRAMがDIMM上に実装される
		UDIMM(Unbuffered DIMM)　最も基本的なもので一般的なPCに使用される
					レジスタ、バッファ等の回路を持たず直接制御するタイプ
					メモリコントローラのみで管理するため制御するチップの限界数がある
		RDIMM(Registered DIMM)　信頼性やメモリ容量が求められるサーバーで使用される
					レジスタ・バッファ回路を備えコマンド、アドレス信号を制御する
					メモリコントローラの負荷が減りより多くのチップを制御できるようになる
		LRDIMM(Load Reduced DIMM)　特に大容量が必要な場合で使用される（比較的規模の大きなタイプのサーバー）
					   レジスタバッファに加えデータバッファチップを導入
					   最低容量64GB、最大容量128GB
	DRAMメモリ規格
		モジュール規格　PC-○○　DDR-xxx
		〇　→　動作周波数[MHz]
		 x　→　データ転送速度[MB/s]
		バスクロック、メモリクロックが高いほどメモリセルの読み書き速度が速くなる
	データ転送速度
		動作周波数[MHz] × バス幅[bit] ＝ データ転送速度[Mbit/s]
		DDR4-3200	3200MHz × 64bit ＝ 204800Mbit/s ＝ 25.6GB/s
		動作周波数が違うメモリ同士を混在させると性能の低いメモリに合わせて動作するため規格は合わせろ
	互換性　DDRxx、SDR間に相互間互換性はない、切り欠きとpinの本数が異なるため別規格同士でそもそも刺せない
		UDIMM、RDIMM、LRDIMMも混在できない
	パリティ付メモリ　データの化けを未然に防ぐために使用されるメモリ
			   2nビットのエラーの場合、足した数が偶数基数でエラー判定できない
			   メモリが壊れるとブルースクリーンになる(NMI)
	ECCメモリ　1bitの誤りであれば訂正できる、2bit以上のエラーも検出はできるが訂正はできないためNMI
	メモリミラーリング　RAID1のこと　使用可能なメモリ数は減少するが、安全性と冗長性は向上
	ランク　1R 64bit  x8ならECCチップ含め9枚のチップ
	　　　　2R 128bit x8ならECCチップ含めて18枚のチップ
	　　　　8ランクまでサポートのマザボに6ポートあるとしても2Rチップ4枚までしか積めない


5.拡張インタフェース
　
　サーバーには必要最低限しか動作に必要なものがのっていないため用途に応じて機能を拡張しなければならない
　
　拡張バス　マザボの拡張スロットにさして使用する
　	シリアル転送　データを1bitずつ送る方式、現在の主流
	パラレル転送　データを複数ビットまとめて送る方法、同じバスクロックなら高速だが配線面でノイズが発生しやすい
	PCE-Express(PCIe)　2本の伝送路を束ねたレーンを一単位とするシリアル転送方式のインタフェイス
			　 伝送路1本あたりの最大転送速度　250MB/s　送受信を分離した全二重方式→1レーンで500MB/s
			 　PCIe4.0まで2倍ずつ性能が向上している　　x32公正であれば　4GB*32 = 128GB/s
	PCI　Intelが提唱したバス方式　特定のCPUに依存せず高速なデータ転送を目的にしたパラレル方式のインタフェイス
	   　PC/AT互換機だけでなく使用されている、PCIeに置き換え
	PCI-X　PCIをベースに高速化を図ったインタフェイスでバス幅64bit、PCIeに置き換え
	PCIe規格ではスロットのレーン数よりも小さいレーン数のカードをスロットに実装可能
	ライザーカード　マザボにPCIeをさすと飛び出すため、直角でなく垂直に搭載可能にするもの
　
　USB　周辺機器を接続するための規格であり、MicrosoftやIntelなどの7社が発表したシリアルインタフェイス規格
	プラグアンドプレイ　機器の接続を自動認識する
	ホットプラグ機能　稼働中の抜き差しを可能とする
	USBハブを介して127台の機器を接続可能
	USB4.0のデータ転送速度は40Gbps
	シリアルポート(RS-232C インタフェイス)　
		通信用インタフェイス、以前はモデムやTAを接続し電話回線や専用回線の接続しそれを介しコンピュータへ接続
		現在は使用されていない、RS-232C インタフェイスが一番使用されていた
	パラレルポート(セントロニクスインタフェイス）
		主にプリンターに使用されていた。現在はLANやUSBを介している
		

6.HDD

　HDD　補助記憶装置
	プラッタ(磁気ディスク)　データを記録保持するディスク
	スピンドルモータ　プラッタを回転させる　7200rpmなど
　	磁気ヘッド　スイングアームの先端　データを書き出す、プラッタに対し2倍の個数つく
	アクチュエータ　任意のトラック上に関係方向に移動するための動力
	プリント基板
		HDDコントローラ　すべての制御
		キャッシュメモリ　一時記憶による処理速度向上
		モータードライバー　プラッタを回転させるスピンドルモータや、アクチュエータを駆動する
				   　ボイスコイルモータなどを制御

　HDDの記録単位
	トラック　同心円状の記憶領域
	シリンダ　ディスク複数に対し各記憶面上の同一半径のトラック
	セクタ　円の中心から放射状に分割した領域、最小尾の記憶単位(512Byte)
	フォーマット　製造直後のHDDを記録できる状態にすること
	記憶容量 = 1セクターの容量*セクタ数*シリンダ数*磁気ヘッド
		磁気ヘッド　６
		シリンダ数　６００
		セクタ数　２００
		１セクタの容量　５１２Byte
		記憶容量 = 512 * 200 * 600 * 6 = 368MB

　読み書き

　