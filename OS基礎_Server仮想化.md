## Server仮想化

- 藤本さん　仮想化オンプレ/Cloud設計構築 
- 村上さん　仮想化オンプレ/Cloud設計構築 -> バックアップSW
- 尾崎さん　仮想化 -> DELL設計構築

---

### 目的

- Server仮想化/VMware製品の基礎知識習得
- 仮想Serverのイメージを持つ
- Serverを仮想マシンにするメリット
  - リソースを無駄なく使える
  - メンテナンスしやすく障害対応できる（vMotion, HA)
- デメリット
  - 構成が複雑
  - 障害時の切り分けが大変

---

### 1. Serverの仮想化とは

- コンピュータリソースをSWで抽象化して論理的に利用する技術
- リソースの柔軟性、SW上からのコンポーネント一元管理など自由度の大幅向上が見込める

|名| 特徴|略語|
|------|------|-----|
|Server仮想化|物理マシンに搭載されたHWリソースを抽象化|`SDC`：Software Difined Compute|
|Storage仮想化|HDDなどの記憶媒体を抽象化|`SDS`：Software Difined Storage|
|NW仮想化|物理NWを抽象化|`SDN`：Software Difined Network|
|Client仮想化|Server仮想化技術をお応用してClient端末のデスクトップ環境を抽象化||

<br>

- `Hypervisor`：物理マシンのHWリソースを抽象化し、複数のOSがリソースを共有して利用できるよう管理するSW
  - 主なServer仮想化製品(当社はすべて取り扱い有)：
  - `ESXi(VMware社)` `Hyper-V(Windows OS標準機能)` `AHV(Nutanix社)` `HVM(HPE社 Ubuntu(Linux)KVM)`

#### 物理マシンとAppの構成（一般的）

- 物理Server一台にAppを一つ動かす
  - デメリット：`拡張による機器コスト増` `管理維持コスト増` `構築コスト増` `高スペックを最大限に活用不可`
- 物理Server一台にAppをnつ動かす
  - あまりない、一つのOSが落ちるとすべてのAppが落ちてしまう
- Server仮想化、物理Server一台にHypervisorをかまして1:1の仮想Serverをnつたてる
  - メリット：`1台のOSがクラッシュしてもほかのOSは正常に稼働`
 
#### 仮想Server実演

- OverleafのようなUI
- フォルダとファイルのような階層関係で構築
- どのStorageに配置するか決める
- PythonのVersionのようにOS, OS_Versionを選択
- HWのリソースのCustomize、無尽蔵に値は大きくできず物理マシンに比例する
- 容量は一般的に一割減衰するため 256GBならば約238GB（1024計算）

#### 仮想化のメリット/デメリット

- メリット
  - `物理マシンの機器/管理コストの削減`：従来だとOS4台に対し物理マシン4台が必要だったが、OS4台を1台に集結可能
  - `物理マシンリソースの有効活用`：Hypervisorより各Appごとの時間需要による余剰リソースを効率よく使用可能
  - `App構築時間短縮`：機種選定からケーブリングまでの手間が省けるため数時間で実装可能
  - `OSを止めずに物理マシンのパーツ交換`：メモリ交換時他の物理マシンへ移行が可能なためOSを稼働させたまま運用可能
  - `古いVersionのOSの延命`：Hypervisorが物理マシンにおいてサポート外のVersionに対応していれば物理マシンは考慮しなくてよくなる

<br>

- デメリット
  - `物理マシン障害時の影響`：物理マシンが停止した場合、その上のすべてのOSが停止する　`電源の冗長化` `フェイルオーバー` `DR(災害機能)`で対策
  - `
  - 
